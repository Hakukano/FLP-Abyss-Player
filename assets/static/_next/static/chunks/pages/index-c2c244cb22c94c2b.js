(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2076)}])},2076:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return c}});var s=a(5893),n=a(2004),l=a(7294),i=a(44);function r(t){let[e,a]=(0,l.useState)(""),[n,r]=(0,l.useState)(20),[o,c]=(0,l.useState)([]),[u,f]=(0,l.useState)(0),[h,d]=(0,l.useState)(!1),g=async(a,s)=>{d(!0);try{let n=await t.playlist.list({search:e,filter:[],offset:(a-1)*s,length:s});c(n.data),f(n.count)}finally{d(!1)}},p=t=>{g(t,n)},w=(t,e)=>{r(t),g(e,t)};return(0,l.useEffect)(()=>{g(1,n)},[]),(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsx)("input",{className:"w-full",type:"text",placeholder:"Press ENTER to search...",value:e,style:{color:"#222"},onChange:t=>a(t.target.value),onKeyDown:t=>{"Enter"===t.key&&g(1,n)}}),(0,s.jsx)(i.ZP,{columns:[{omit:!0,name:"ID",selector:t=>t.id},{name:"Full Path",selector:t=>t.path,button:!0,width:"100%",cell:e=>(0,s.jsx)("button",{onClick:async()=>{d(!0);try{let a=await t.playlist.read({id:e.id});t.setPlaylistData(a)}finally{d(!1)}},children:e.path})},{omit:!0,name:"MIME Type",selector:t=>t.mime_type}],data:o,progressPending:h,pagination:!0,paginationServer:!0,paginationPerPage:n,paginationTotalRows:u,onChangeRowsPerPage:w,onChangePage:p})]})}class o{async read(t){let e=await fetch("/playlists/".concat(t.id));if(e.ok)return await e.json();throw{status:e.status,message:await e.text()}}async list(t){let e=await fetch("/playlists?".concat(new URLSearchParams({filter:t.filter.join(","),search:t.search,offset:t.offset.toString(),length:t.length.toString()})));if(e.ok)return await e.json();throw{status:e.status,message:await e.text()}}}function c(){let t=new o,[e,a]=(0,l.useState)(null);return(0,s.jsx)("main",{className:"flex flex-col w-full h-full items-center justify-between p-8",children:(0,s.jsxs)("div",{className:"grid grid-rows-1 grid-cols-12 grid-flow-col gap-4",children:[(0,s.jsx)("div",{className:"col-span-7",children:(0,s.jsx)(r,{playlist:t,setPlaylistData:a})}),(0,s.jsx)("div",{className:"col-span-5",children:e?e.mime_type.startsWith("image/")?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(n.Z,{width:"100%",height:"100%",url:"/playlists/".concat(e.id,"/stream"),controls:!0}):(0,s.jsx)(s.Fragment,{})})]})})}}},function(t){t.O(0,[220,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);